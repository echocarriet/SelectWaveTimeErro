import{N as w,a as k,D as M}from"./NavbarVote-hkl3AYcp.js";import{N as P,_ as $}from"./NavbarEl-7SCmFO1x.js";import{_ as N,c as d,a,d as e,k as m,v as c,x as V,F as h,e as C,r as l,o as b,t as U}from"./index-aJNZ2s78.js";const D={components:{Navbar:P,NavbarBackend:w,NavbarVote:k,ComponentFooter:$,DelModal:M},data(){return{delContent:"「此帳號後，需重新建立帳號」",memberId:"",memberPerson:{follwing:[],followers:[],socialMedia:[],likedPolls:[]}}},methods:{getToken(){const n=document.cookie.replace(/(?:(?:^|.*;\s*)selectWaveToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=n,this.$http.get("https://select-wave-backend.onrender.com/api/auth/check",{headers:{Authorization:n}}).then(o=>{if(o.data.status){console.log(o);const{id:u}=o.data.result;this.memberId=u,this.getMemberInfo(this.memberId)}else this.$swal({title:"登入失敗，請重新登入"}),this.$router.push("/login")}).catch(o=>{this.$swal({title:`${o.response.data.message}`})})},getMemberInfo(n){const t=`https://select-wave-backend.onrender.com/api/member/${n}`;this.$http.get(t).then(o=>{this.memberPerson=o.data.result,this.memberPerson.socialMedia.length||this.memberPerson.socialMedia.push({type:"Facebook",id:""},{type:"Instagram",id:""},{type:"YouTube",id:""},{type:"個人網站",id:""}),console.log(this.memberPerson)}).catch(o=>{console.log(o),this.$swal({title:`${o.response.data.message}`})})},updateMember(){this.$http.put("https://select-wave-backend.onrender.com/api/member/",this.memberPerson).then(t=>{console.log(t),this.getMemberInfo(this.memberId),this.$swal({title:`${t.data.message}`})}).catch(t=>{console.log(t),this.$swal({title:`${t.response.data.message}`})})}},mounted(){this.getToken()}},I={class:"max-w-screen-lg mx-auto px-3"},B={class:"outline outline-1 outline-gray-3 rounded-2xl md:rounded-3xl py-11 px-5 mb-10"},F={class:"flex justify-between mb-7 md:mb-8 max-w-3xl mx-auto"},T=e("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full bg-white text-gray-1 text-base font-medium outline outline-2 outline-gray-1 hover:outline-primary hover:text-primary"}," 換成頭像 ",-1),j={class:"mb-4"},A=e("label",{for:"name",class:"block mb-2 text-base font-medium text-gray-1"},"名稱",-1),S={class:"mb-4"},z=e("label",{for:"sex",class:"block mb-2 text-base font-medium text-gray-1"},"性別",-1),E=e("option",{value:"",selected:"",disabled:""},"請選擇性別",-1),L=e("option",{value:"male"},"男",-1),W=e("option",{value:"female"},"女",-1),Y=e("option",{value:"x"},"不方便透露",-1),q=[E,L,W,Y],G={class:"mb-4"},H=e("label",{for:"birthday",class:"block mb-2 text-base font-medium text-gray-1"},"生日",-1),J={for:"facebookUrl",class:"block mb-2 text-base font-medium text-gray-1"},K=["onUpdate:modelValue"],O=e("button",{type:"submit",class:"text-white bg-gray-1 hover:bg-primary focus:ring-4 focus:outline-none focus:ring-primary-light font-medium rounded-full text-base w-full sm:w-auto px-5 py-2.5 text-center"}," 更新 ",-1);function Q(n,t,o,u,s,p){const f=l("Navbar"),y=l("NavbarBackend"),g=l("NavbarVote"),x=l("DelModal"),_=l("ComponentFooter");return b(),d(h,null,[a(f),a(y),a(g),e("div",I,[e("div",B,[e("div",F,[T,e("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full border-2 border-gray-1 bg-white text-gray-1 text-base font-medium hover:text-primary hover:border-primary",onClick:t[0]||(t[0]=r=>n.$refs.DelModal.openModal())}," 刪除帳號 ")]),e("form",{class:"max-w-3xl mx-auto",onSubmit:t[4]||(t[4]=(...r)=>p.updateMember&&p.updateMember(...r))},[e("div",j,[A,m(e("input",{type:"text",id:"name",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":t[1]||(t[1]=r=>s.memberPerson.name=r)},null,512),[[c,s.memberPerson.name]])]),e("div",S,[z,m(e("select",{id:"sex",class:"bg-white border border-gray-300 text-gray-900 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":t[2]||(t[2]=r=>s.memberPerson.gender=r)},q,512),[[V,s.memberPerson.gender]])]),e("div",G,[H,m(e("input",{type:"date",id:"birthday",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":t[3]||(t[3]=r=>s.memberPerson.birthday=r)},null,512),[[c,s.memberPerson.birthday]])]),(b(!0),d(h,null,C(s.memberPerson.socialMedia,(r,i)=>(b(),d("div",{class:"mb-4",key:i},[e("label",J,U(s.memberPerson.socialMedia[i].type)+" 社群連結 ",1),m(e("input",{type:"url",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4 mb-2",placeholder:"請填入社群網址","onUpdate:modelValue":v=>s.memberPerson.socialMedia[i].id=v},null,8,K),[[c,s.memberPerson.socialMedia[i].id]])]))),128)),O],32)])]),a(x,{ref:"DelModal",delContent:s.delContent},null,8,["delContent"]),a(_)],64)}const ee=N(D,[["render",Q]]);export{ee as default};
