import{N as v,a as w,D as M}from"./NavbarVote-SoYZMpv6.js";import{N as P,_ as D}from"./NavbarEl-tQzqHaWJ.js";import{_ as S,c as l,a as i,d as t,k as d,v as p,x as $,F as f,e as N,r as m,o as c,t as V}from"./index-OfsC_9Fv.js";const I={components:{Navbar:P,NavbarBackend:v,NavbarVote:w,ComponentFooter:D,DelModal:M},data(){return{delContent:"「此帳號後，需重新建立帳號」",memberId:"",memberPerson:{follwing:[],followers:[],socialMedia:[],likedPolls:[]},birthday:""}},methods:{getToken(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)selectWaveToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.$http.get("https://select-wave-backend.onrender.com/api/auth/check",{headers:{Authorization:s}}).then(n=>{if(n.data.status){console.log(n);const{id:b}=n.data.result;this.memberId=b,this.getMemberInfo(this.memberId)}else this.$swal({title:"登入失敗，請重新登入"}),this.$router.push("/login")}).catch(n=>{this.$swal({title:`${n.response.data.message}`})})},getMemberInfo(s){const e=`https://select-wave-backend.onrender.com/api/member/${s}`;this.$http.get(e).then(n=>{this.memberPerson=n.data.result,this.memberPerson.socialMedia.length||this.memberPerson.socialMedia.push({type:"Facebook",id:""},{type:"Instagram",id:""},{type:"YouTube",id:""},{type:"個人網站",id:""}),console.log(this.memberPerson)}).catch(n=>{console.log(n),this.$swal({title:`${n.response.data.message}`})})},updateMember(){this.$http.put("https://select-wave-backend.onrender.com/api/member/",this.memberPerson).then(e=>{console.log(e),this.getMemberInfo(this.memberId),this.$swal({title:`${e.data.message}`})}).catch(e=>{console.log(e),this.$swal({title:`${e.response.data.message}`})})},clickDate(){if(this.birthday){const s=new Date(this.birthday),e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),b=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),a=String(s.getMinutes()).padStart(2,"0"),h=String(s.getSeconds()).padStart(2,"0"),y=String(s.getMilliseconds()).padStart(3,"0"),g=`${e}-${n}-${b}T${o}:${a}:${h}.${y}Z`;this.memberPerson.birthday=g}}},watch:{memberPerson:{handler(){[this.birthday]=this.memberPerson.birthday.split("T")},deep:!0}},mounted(){this.getToken()}},U={class:"max-w-screen-lg mx-auto px-3"},C={class:"outline outline-1 outline-gray-3 rounded-2xl md:rounded-3xl py-11 px-5 mb-10"},T={class:"flex justify-between mb-7 md:mb-8 max-w-3xl mx-auto"},F=t("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full bg-white text-gray-1 text-base font-medium outline outline-2 outline-gray-1 hover:outline-primary hover:text-primary"}," 換成頭像 ",-1),B={class:"mb-4"},j=t("label",{for:"name",class:"block mb-2 text-base font-medium text-gray-1"},"名稱",-1),A={class:"mb-4"},z=t("label",{for:"sex",class:"block mb-2 text-base font-medium text-gray-1"},"性別",-1),Y=t("option",{value:"",selected:"",disabled:""},"請選擇性別",-1),E=t("option",{value:"male"},"男",-1),H=t("option",{value:"female"},"女",-1),L=t("option",{value:"x"},"不方便透露",-1),W=[Y,E,H,L],Z={class:"mb-4"},q=t("label",{for:"birthday",class:"block mb-2 text-base font-medium text-gray-1"},"生日",-1),G={for:"facebookUrl",class:"block mb-2 text-base font-medium text-gray-1"},J=["onUpdate:modelValue"],K=t("button",{type:"submit",class:"text-white bg-gray-1 hover:bg-primary focus:ring-4 focus:outline-none focus:ring-primary-light font-medium rounded-full text-base w-full sm:w-auto px-5 py-2.5 text-center"}," 更新 ",-1);function O(s,e,n,b,o,a){const h=m("Navbar"),y=m("NavbarBackend"),g=m("NavbarVote"),x=m("DelModal"),_=m("ComponentFooter");return c(),l(f,null,[i(h),i(y),i(g),t("div",U,[t("div",C,[t("div",T,[F,t("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full border-2 border-gray-1 bg-white text-gray-1 text-base font-medium hover:text-primary hover:border-primary",onClick:e[0]||(e[0]=r=>s.$refs.DelModal.openModal())}," 刪除帳號 ")]),t("form",{class:"max-w-3xl mx-auto",onSubmit:e[7]||(e[7]=(...r)=>a.updateMember&&a.updateMember(...r))},[t("div",B,[j,d(t("input",{type:"text",id:"name",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":e[1]||(e[1]=r=>o.memberPerson.name=r)},null,512),[[p,o.memberPerson.name]])]),t("div",A,[z,d(t("select",{id:"sex",class:"bg-white border border-gray-300 text-gray-900 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":e[2]||(e[2]=r=>o.memberPerson.gender=r)},W,512),[[$,o.memberPerson.gender]])]),t("div",Z,[q,o.memberPerson.birthday?d((c(),l("input",{key:1,type:"date",id:"birthday",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":e[5]||(e[5]=r=>o.birthday=r),onInput:e[6]||(e[6]=(...r)=>a.clickDate&&a.clickDate(...r))},null,544)),[[p,o.birthday]]):d((c(),l("input",{key:0,type:"date",id:"birthday",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":e[3]||(e[3]=r=>o.birthday=r),onInput:e[4]||(e[4]=(...r)=>a.clickDate&&a.clickDate(...r))},null,544)),[[p,o.birthday]])]),(c(!0),l(f,null,N(o.memberPerson.socialMedia,(r,u)=>(c(),l("div",{class:"mb-4",key:u},[t("label",G,V(o.memberPerson.socialMedia[u].type)+" 社群連結 ",1),d(t("input",{type:"url",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4 mb-2",placeholder:"請填入社群網址","onUpdate:modelValue":k=>o.memberPerson.socialMedia[u].id=k},null,8,J),[[p,o.memberPerson.socialMedia[u].id]])]))),128)),K],32)])]),i(x,{ref:"DelModal",delContent:o.delContent},null,8,["delContent"]),i(_)],64)}const ee=S(I,[["render",O]]);export{ee as default};
