import{l as V,m as P,_ as v,o as d,c,d as e,f as y,k as f,v as x,F as _,e as D,i as z,t as i,b as N,p as M,g as k,a as h,r as g,q as F,s as R}from"./index-Q9xhkXP-.js";import{M as $,C as A,D as G,N as q,a as B}from"./NavbarVote-7cKbo1xY.js";import{N as O,_ as J}from"./NavbarEl-RDce_-vx.js";const T=V("dateStore",{state:()=>({}),actions:{turnDate(o){if(o===null||!o)return"無期限";const t=new Date(o),l=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${l}-${n}-${s}`}}}),W={emits:["update-poll"],mixins:[$],props:["addPollData","optionsData","allTags","selectedTagsProps","endDateProps"],data(){return{modal:null,addPollDataModal:{},optionsDataModal:[{title:"",imageUrl:"https://imgur.com/TECsq2J.png"}],selectedTags:[],startDate:"",endDate:""}},methods:{...P(T,["turnDate"]),uploadCoverFile(){const o=this.$refs.fileInput.files[0],t=new FormData;t.append("file-to-upload",o);const l=document.cookie.replace(/(?:(?:^|.*;\s*)selectWaveToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=l;const n={headers:{Authorization:l}};this.$http.post("https://select-wave-backend.onrender.com/api/imgur/upload",t,n).then(r=>{console.log(r),this.addPollDataModal.imageUrl=r.data.result,this.$refs.fileInput.value=""}).catch(r=>{this.$swal({title:`${r.response.data.message}`})})},uploadFile(o){const t=this.$refs.fileInputOption[o].files[0],l=new FormData;l.append("file-to-upload",t);const n=document.cookie.replace(/(?:(?:^|.*;\s*)selectWaveToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=n;const s={headers:{Authorization:n}};this.$http.post("https://select-wave-backend.onrender.com/api/imgur/upload",l,s).then(a=>{this.optionsDataModal[o].imageUrl=a.data.result,this.$refs.fileInputOption[o].value="",console.log(this.$refs.fileInput)}).catch(a=>{this.$swal({title:`${a.response.data.message}`})})},createOption(){this.optionsDataModal.push({title:"",imageUrl:"https://imgur.com/TECsq2J.png"})},changeTag(){const o=this.$refs.labelInput.value;o&&(this.selectedTags||(this.selectedTags=[]),!this.selectedTags.includes(o)&&this.selectedTags.length<3&&(this.selectedTags.push(o),this.$refs.labelInput.value=""))},clickEndDate(){if(this.endDate){const o=new Date(this.endDate),t=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),n=String(o.getDate()).padStart(2,"0"),s=String(o.getHours()).padStart(2,"0"),r=String(o.getMinutes()).padStart(2,"0"),a=String(o.getSeconds()).padStart(2,"0"),u=String(o.getMilliseconds()).padStart(3,"0"),m=`${t}-${l}-${n}T${s}:${r}:${a}.${u}Z`;this.addPollDataModal.endDate=m}}},computed:{},watch:{addPollData:{handler(){this.addPollDataModal=this.addPollData,this.optionsDataModal=this.optionsData,[this.startDate]=this.addPollData.startDate.split("T")},deep:!0},startDate(){const o=new Date(this.startDate),t=new Date,n=o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate()?t:o,s=new Date(n.getTime()+8*60*60*1e3).toISOString();this.addPollDataModal.startDate=`${s.slice(0,23)}Z`},endDateProps:{handler(){this.endDate=this.endDateProps},deep:!0}},mounted(){}},Y={ref:"flowbiteModal",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},Z={class:"relative p-4 w-full max-w-2xl max-h-full"},H={class:"relative bg-white rounded-2xl shadow"},X={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t-2xl bg-white sticky top-0"},L=e("h3",{class:"text-xl font-semibold text-gray-900"}," 建立新投票 ",-1),K=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Q=e("span",{class:"sr-only"},"Close modal",-1),ee=[K,Q],te={class:"p-4 md:p-5 space-y-4"},oe={class:"mb-4"},se=e("label",{for:"title",class:"block mb-2 text-base font-medium text-gray-1"},"標題*",-1),ae={class:"mb-4"},le=e("p",{class:"mb-2 text-base font-medium text-gray-1"},"選項內容*",-1),re={class:"text-sm font-medium text-gray-1 rounded-lg list-decimal px-4 marker:text-base"},ne={class:"flex flex-wrap space-y-2"},ie={class:"basis-full"},de=["src"],ce={class:"basis-full"},pe={class:"flex flex-col mb-2"},ue=["onChange"],he=["onUpdate:modelValue"],ge={key:0,class:"flex"},me=["onClick"],be={class:"mb-4"},fe=e("label",{for:"label",class:"block mb-2 text-base font-medium text-gray-1"},"標籤",-1),ye=e("p",{class:"mb-2 text-sm text-gray-2"},"最多可新增三個標籤",-1),xe={id:"label-tag",ref:"labelTag"},_e=["value"],ve={class:"flex flex-wrap space-x-1 space-y-1"},we=e("span",{class:"text-primary mr-1"},"#",-1),De={class:"mr-1"},ke=["onClick"],$e=e("i",{class:"bi bi-x-lg"},null,-1),Me=[$e],Pe={class:"mb-4"},Te=e("label",{for:"cover",class:"block mb-2 text-base font-medium text-gray-1"},"上傳封面照",-1),Ce=["src"],Ue={class:"mb-4"},Se=e("label",{for:"message",class:"block mb-2 text-base font-medium text-gray-1"},"投票說明*",-1),Ie=e("hr",null,null,-1),Ee=e("div",{class:"mb-4"},[e("p",{class:"mb-2 text-base font-medium text-gray-1"},"投票有效日")],-1),je={class:"mb-4"},Ve={class:"flex mb-2"},ze=e("span",{class:"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border rounded-e-0 border-gray-300 rounded-s-full"}," 開始日期 ",-1),Ne={class:"flex"},Fe=e("span",{class:"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border rounded-e-0 border-gray-300 rounded-s-full"}," 結束日期 ",-1),Re={class:"mb-4"},Ae=e("i",{class:"bi bi-calendar-check"},null,-1),Ge={class:"mb-4"},qe=e("p",{class:"mb-2 text-base font-medium text-gray-1"},"投票狀態",-1),Be={class:"text-sm font-medium text-gray-1 flex"},Oe={class:"border-gray-200"},Je={class:"flex items-center ps-3"},We=e("label",{for:"open",class:"w-full py-3 ms-2 text-sm font-medium"},"公開",-1),Ye={class:"border-gray-200"},Ze={class:"flex items-center ps-3"},He=e("label",{for:"hide",class:"w-full py-3 ms-2 text-sm font-medium"},"隱藏",-1),Xe={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b-2xl bottom-0 bg-white sticky"},Le={class:"ms-2"},Ke={class:"ms-2"};function Qe(o,t,l,n,s,r){return d(),c("div",Y,[e("div",Z,[e("div",H,[e("div",X,[L,e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:t[0]||(t[0]=y(a=>s.modal.hide(),["prevent"]))},ee)]),e("div",te,[e("form",null,[e("div",oe,[se,f(e("input",{type:"text",id:"title",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4","onUpdate:modelValue":t[1]||(t[1]=a=>s.addPollDataModal.title=a)},null,512),[[x,s.addPollDataModal.title]])]),e("div",ae,[le,e("ol",re,[(d(!0),c(_,null,D(l.optionsData,(a,u)=>(d(),c("li",{key:u,class:"w-full border-b border-gray-4 p-2 hover:bg-primary-light"},[e("div",ne,[e("div",ie,[e("img",{src:a.imageUrl,class:"rounded-2xl object-cover object-center",style:{width:"100px",height:"100px"}},null,8,de)]),e("div",ce,[e("div",pe,[e("input",{class:"block mb-2 w-full text-sm text-gray-900 border border-gray-300 rounded-full cursor-pointer bg-gray-50 focus:outline-none",id:"cover",type:"file",ref_for:!0,ref:"fileInputOption",onChange:m=>r.uploadFile(u)},null,40,ue),f(e("input",{type:"text",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full p-2.5",placeholder:"請輸入內容","onUpdate:modelValue":m=>a.title=m},null,8,he),[[x,a.title]])]),l.optionsData.length>1?(d(),c("div",ge,[e("button",{class:"rounded-3xl border border-red-600 text-red-600 hover:bg-red-600 hover:text-white bg-white px-4 py-2.5 mr-3",onClick:m=>s.optionsDataModal.splice(u,1)}," 移除 ",8,me)])):z("",!0)])])]))),128)),e("button",{type:"button",class:"rounded-3xl border border-gray-1 hover:bg-gray-1 hover:text-white bg-white px-4 py-2.5 mt-3 w-full",onClick:t[2]||(t[2]=(...a)=>r.createOption&&r.createOption(...a))}," 新增選項 ")])]),e("div",be,[fe,ye,e("input",{id:"label",list:"label-tag",ref:"labelInput",class:"bg-white border border-gray-3 text-sm rounded-full focus:ring-primary focus:border-primary block w-full px-3 py-4 mb-6",onChange:t[3]||(t[3]=(...a)=>r.changeTag&&r.changeTag(...a))},null,544),e("datalist",xe,[(d(!0),c(_,null,D(l.allTags,a=>(d(),c("option",{key:a,value:a},i(a),9,_e))),128))],512),e("div",ve,[(d(!0),c(_,null,D(s.selectedTags,(a,u)=>(d(),c("div",{class:"rounded-3xl text-gray-1 px-4 py-2.5 bg-primary-light",key:u},[we,e("span",De,i(a),1),e("a",{class:"cursor-pointer hover:text-primary-dark px-1",onClick:y(m=>s.selectedTags.splice(u,1),["prevent"])},Me,8,ke)]))),128))])]),e("div",Pe,[Te,e("input",{class:"block mb-2 w-full text-base text-gray-900 border border-gray-300 rounded-full cursor-pointer bg-gray-50 focus:outline-none",id:"cover",type:"file",ref:"fileInput",onChange:t[4]||(t[4]=(...a)=>r.uploadCoverFile&&r.uploadCoverFile(...a))},null,544),e("img",{src:s.addPollDataModal.imageUrl,class:"rounded-3xl object-cover object-center",alt:"封面照",style:{width:"150px",height:"150px"}},null,8,Ce)]),e("div",Ue,[Se,f(e("textarea",{id:"message",rows:"4",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary focus:border-primary",placeholder:"請在此寫下投票說明..","onUpdate:modelValue":t[5]||(t[5]=a=>s.addPollDataModal.description=a)},`
              `,512),[[x,s.addPollDataModal.description]]),Ie]),Ee,e("div",je,[e("div",Ve,[ze,f(e("input",{type:"date",id:"vote-start",class:"rounded-none rounded-e-full bg-gray-50 border text-gray-900 focus:ring-primary focus:border-primary block flex-1 min-w-0 w-full text-sm border-gray-300 px-3 py-4","onUpdate:modelValue":t[6]||(t[6]=a=>s.startDate=a)},null,512),[[x,s.startDate]])]),e("div",Ne,[Fe,f(e("input",{type:"date",id:"vote-end",class:"rounded-none rounded-e-full bg-gray-50 border text-gray-900 focus:ring-primary focus:border-primary block flex-1 min-w-0 w-full text-sm border-gray-300 px-3 py-4","onUpdate:modelValue":t[7]||(t[7]=a=>s.endDate=a),onInput:t[8]||(t[8]=(...a)=>r.clickEndDate&&r.clickEndDate(...a))},null,544),[[x,s.endDate]])])]),e("div",Re,[Ae,N(" 開始日："+i(o.turnDate(s.addPollDataModal.startDate))+" - 結束日："+i(o.turnDate(s.addPollDataModal.endDate)),1)]),e("div",Ge,[qe,e("ul",Be,[e("li",Oe,[e("div",Je,[f(e("input",{id:"open",type:"radio",name:"list-radio",class:"w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary-light focus:ring-2",value:"true","onUpdate:modelValue":t[9]||(t[9]=a=>s.addPollDataModal.isPrivate=a)},null,512),[[M,s.addPollDataModal.isPrivate]]),We])]),e("li",Ye,[e("div",Ze,[f(e("input",{id:"hide",type:"radio",name:"list-radio",class:"w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary-light focus:ring-2",value:"false","onUpdate:modelValue":t[10]||(t[10]=a=>s.addPollDataModal.isPrivate=a)},null,512),[[M,s.addPollDataModal.isPrivate]]),He])])])])])]),e("div",Xe,[e("button",{type:"button",class:"text-white bg-primary hover:bg-primary-dark focus:ring-4 focus:outline-none focus:ring-primary-light font-medium rounded-full text-base px-6 py-3 text-center",onClick:t[11]||(t[11]=a=>o.$emit("update-poll",s.addPollDataModal))}," 儲存 "),e("button",{type:"button",class:"px-6 py-3 ms-3 text-base font-medium text-gray-900 focus:outline-none bg-white rounded-full border border-gray-200 focus:z-10 focus:ring-4 focus:ring-gray-100 hover:text-white hover:bg-gray-3",onClick:t[12]||(t[12]=y(a=>s.modal.hide(),["prevent"]))},"取消"),e("p",Le,"開始:"+i(this.addPollDataModal.startDate)+"/ "+i(s.startDate),1),e("p",Ke,"結束:"+i(this.addPollDataModal.endDate)+"/ "+i(),1)])])])],512)}const et=v(W,[["render",Qe]]),tt={mixins:[$],data(){return{modal:null}}},ot={ref:"flowbiteModal",id:"static-modal","data-modal-backdrop":"static",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},st={class:"relative p-4 w-full max-w-2xl max-h-full"},at={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},lt={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t sticky top-0 bg-white"},rt=e("h3",{class:"text-xl font-semibold text-gray-900"}," 編輯投票 ",-1),nt=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),it=e("span",{class:"sr-only"},"Close modal",-1),dt=[nt,it],ct=k('<div class="p-4 md:p-5 space-y-4"><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> With less than a month to go before the European Union enacts new consumer privacy laws for its citizens, companies around the world are updating their terms of service agreements to comply. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p><p class="text-base leading-relaxed text-gray-500 dark:text-gray-400"> The European Union’s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them. </p></div>',1),pt={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b sticky bottom-0 bg-white"},ut=e("button",{"data-modal-hide":"static-modal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," 儲存 ",-1);function ht(o,t,l,n,s,r){return d(),c("div",ot,[e("div",st,[e("div",at,[e("div",lt,[rt,e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:t[0]||(t[0]=y(a=>s.modal.hide(),["prevent"]))},dt)]),ct,e("div",pt,[ut,e("button",{"data-modal-hide":"static-modal",type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",onClick:t[1]||(t[1]=y(a=>s.modal.hide(),["prevent"]))},"取消")])])])],512)}const gt=v(tt,[["render",ht]]),mt={mixins:[$],data(){return{modal:null}},methods:{copyUrl(){navigator.clipboard.writeText(this.$refs.shareUrl.innerText),this.modal.hide(),this.$swal({title:"複製成功"})}}},bt={ref:"flowbiteModal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},ft={class:"relative p-4 w-full max-w-md max-h-full"},yt={class:"relative bg-white rounded-2xl shadow border border-primary"},xt={class:"flex items-center justify-between p-4 md:p-5 border-b border-primary rounded-t"},_t=e("h3",{class:"text-xl font-semibold text-primary"}," 分享投票網址 ",-1),vt=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),wt=e("span",{class:"sr-only"},"Close modal",-1),Dt=[vt,wt],kt={class:"p-4 md:p-5"},$t={class:"pb-4 text-center",ref:"shareUrl"};function Mt(o,t,l,n,s,r){return d(),c("div",bt,[e("div",ft,[e("div",yt,[e("div",xt,[_t,e("button",{type:"button",class:"end-2.5 text-primary bg-transparent hover:bg-primary-light hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center",onClick:t[0]||(t[0]=y(a=>s.modal.hide(),["prevent"]))},Dt)]),e("div",kt,[e("p",$t,"http://www.shengee.com.s/XXX",512),e("button",{type:"submit",class:"w-full text-white bg-primary hover:bg-primary-dark focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-3xl text-base px-5 py-2.5 text-center",onClick:t[1]||(t[1]=(...a)=>r.copyUrl&&r.copyUrl(...a))}," 複製 ")])])])],512)}const Pt=v(mt,[["render",Mt]]),Tt={},Ct=k('<ul class="inline-flex -space-x-px text-base h-10 w-full justify-center"><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark mr-1.5"><span class="sr-only">回到第一頁</span><i class="bi bi-chevron-double-left text-sm"></i></a></li><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark mr-1.5"><span class="sr-only">Previous</span><i class="bi bi-chevron-left text-sm"></i></a></li><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark mr-1.5"> 1 </a></li><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark mr-1.5"> 2 </a></li><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark mr-1.5"><span class="sr-only">Next</span><i class="bi bi-chevron-right text-sm"></i></a></li><li><a href="#" class="pagination-w flex items-center justify-center p-2 leading-tight text-gray-1 bg-white border border-gray-4 rounded-lg hover:bg-primary-light hover:text-primary-dark"><span class="sr-only">到最後一頁</span><i class="bi bi-chevron-double-right tex-sm"></i></a></li></ul>',1),Ut=[Ct];function St(o,t){return d(),c("nav",null,Ut)}const It=v(Tt,[["render",St]]),Et={data(){return{collapseModal:null}},mounted(){this.collapseModal=new A(this.$refs.flowbiteCollapse)}},jt={mixins:[Et],components:{Navbar:O,ComponentFooter:J,DelModal:G,ShareModal:Pt,NavbarBackend:q,NavbarVote:B,AddPullModal:et,EditPullModal:gt,Pagination:It},data(){return{memberId:"",isNew:!1,collapseModal:null,delContent:"「xxx投票」",polls:[],memberPolls:[],addPollData:{title:"",description:"",imageUrl:"https://i.imgur.com/D3hp8H6.png",tags:[],startDate:"",endDate:"",isPrivate:!1,optionsData:[{title:"",imageUrl:"https://imgur.com/TECsq2J.png"}],status:"active"},allTags:[],startDate:"",endDate:null}},methods:{getToken(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)selectWaveToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=o,this.$http.get("https://select-wave-backend.onrender.com/api/auth/check",{headers:{Authorization:o}}).then(l=>{if(l.data.status){const{id:n}=l.data.result;this.memberId=n,this.getMemberPolls()}else this.$swal({title:"登入失敗，請重新登入"}),this.$router.push("/login")}).catch(l=>{this.$swal({title:`${l.response.data.message}`})})},getMemberPolls(){const o=`https://select-wave-backend.onrender.com/api/poll?createdBy=${this.memberId}`;this.$http.get(o).then(t=>{t.status===200&&(console.log(t),this.memberPolls=t.data)}).catch(t=>{console.log(t),this.$swal({title:`${t.response.data.message}`})})},getPolls(){this.$http.get("https://select-wave-backend.onrender.com/api/poll/").then(t=>{if(t.status===200){console.log(t),this.polls=t.data.polls;const l=this.polls.flatMap(s=>s.tags);console.log(l);const n=new Set(l);this.allTags=[...n]}}).catch(t=>{console.log(t),this.$swal({title:`${t.response.data.message}`})})},openModal(){const o=new Date;let l=`${o.toISOString().slice(0,23)}Z`;l=`${new Date(o.getTime()+8*60*60*1e3).toISOString().slice(0,23)}Z`,this.addPollData={imageUrl:"https://i.imgur.com/D3hp8H6.png",optionsData:[{title:"",imageUrl:"https://imgur.com/TECsq2J.png"}],startDate:l,isPrivate:!1,tags:[]},this.endDate=null,this.$refs.AddPullModal.openModal()},updateNewPoll(){this.$http.post("https://select-wave-backend.onrender.com/api/poll/",this.addPollData).then(t=>{t.status===200&&(console.log(t),this.$swal({title:`${t.data.message}`}))}).catch(t=>{console.log(t),this.$swal({title:`${t.response.data.message}`})}),console.log(this.addPollData),this.$refs.AddPullModal.hideModal()},...P(T,["turnDate"])},mounted(){this.getToken(),this.getPolls()}},w=o=>(F("data-v-77e7bab4"),o=o(),R(),o),Vt={class:"max-w-screen-lg mx-auto px-3"},zt={class:"outline outline-1 outline-gray-3 rounded-2xl md:rounded-3xl pt-5 pb-10 md:pt-4 md:pb-16 px-3.5 md:px-5 mb-10"},Nt={class:"flex justify-between mb-7 md:mb-8"},Ft={class:"relative"},Rt={ref:"flowbiteCollapse",class:"absolute top-14 z-10 hidden font-normal bg-white divide-y rounded-2xl shadow-lg w-44 animate-fade-down animate-once animate-ease-in-out"},At=k('<ul class="py-3 text-sm text-gray-700" data-v-77e7bab4><li data-v-77e7bab4><a href="#" class="block px-7 py-2 hover:bg-gray-100" data-v-77e7bab4>所有投票</a></li><li data-v-77e7bab4><a href="#" class="block px-7 py-2 hover:bg-gray-100" data-v-77e7bab4>投票狀態：隱藏</a></li><li data-v-77e7bab4><a href="#" class="block px-7 py-2 hover:bg-gray-100" data-v-77e7bab4>投票狀態：公開</a></li><li data-v-77e7bab4><a href="#" class="block px-7 py-2 hover:bg-gray-100" data-v-77e7bab4>投票進行中</a></li><li data-v-77e7bab4><a href="#" class="block px-7 py-2 hover:bg-gray-100" data-v-77e7bab4>投票已結束</a></li></ul>',1),Gt=[At],qt={class:"w-full text-base text-center text-gray-1"},Bt=w(()=>e("thead",{class:"text-gray-2 uppercase"},[e("tr",{class:"border-b"},[e("th",{scope:"col",class:"px-6 py-3 font-medium"}," 投票標題 "),e("th",{scope:"col",class:"px-6 py-3 font-medium hidden lg:table-cell"}," 投票狀態 "),e("th",{scope:"col",class:"px-6 py-3 font-medium hidden lg:table-cell"}," 參與人數 "),e("th",{scope:"col",class:"px-6 py-3 font-medium hidden lg:table-cell"}," 開始日期 "),e("th",{scope:"col",class:"px-6 py-3 font-medium hidden lg:table-cell"}," 結束日期 "),e("th",{scope:"col",class:"px-6 py-3 font-medium hidden lg:table-cell"}," 分享 "),e("th",{scope:"col",class:"px-6 py-3 font-medium"}," 編輯 ")])],-1)),Ot={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap text-left lg:text-center"},Jt={class:"block lg:hidden"},Wt={class:"block lg:hidden"},Yt={class:"block lg:hidden"},Zt={class:"block lg:hidden"},Ht={class:"px-6 py-4 hidden lg:table-cell"},Xt={class:"px-6 py-4 hidden lg:table-cell"},Lt={class:"px-6 py-4 hidden lg:table-cell"},Kt={class:"px-6 py-4 hidden lg:table-cell"},Qt={class:"px-6 py-4 hidden lg:table-cell"},eo=w(()=>e("i",{class:"bi bi-share w-full text-xl"},null,-1)),to=[eo],oo={class:"px-6 py-4 flex flex-col justify-center lg:justify-between lg:flex-row"},so=w(()=>e("i",{class:"bi bi-share w-full text-xl"},null,-1)),ao=[so],lo=w(()=>e("i",{class:"bi bi-trash3 w-full text-xl"},null,-1)),ro=[lo],no=w(()=>e("i",{class:"bi bi-pencil w-full text-xl"},null,-1)),io=[no];function co(o,t,l,n,s,r){const a=g("Navbar"),u=g("NavbarBackend"),m=g("NavbarVote"),C=g("Pagination"),U=g("AddPullModal"),S=g("EditPullModal"),I=g("DelModal"),E=g("shareModal"),j=g("ComponentFooter");return d(),c(_,null,[h(a),h(u),h(m),e("div",Vt,[e("div",zt,[e("div",Nt,[e("div",Ft,[e("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full bg-white text-gray-1 text-base font-medium outline outline-2 outline-gray-1 hover:outline-primary hover:text-primary",onClick:t[0]||(t[0]=p=>s.collapseModal.toggle())}," 篩選 "),e("div",Rt,Gt,512)]),e("button",{type:"button",class:"px-6 py-3 flex items-center justify-center rounded-full bg-gray-1 text-white text-base font-medium hover:bg-primary",onClick:t[1]||(t[1]=(...p)=>r.openModal&&r.openModal(...p))}," 建立新投票 ")]),e("table",qt,[Bt,e("tbody",null,[(d(!0),c(_,null,D(s.memberPolls.polls,p=>(d(),c("tr",{key:p.id,class:"bg-white border-b hover:bg-primary-light"},[e("th",Ot,[e("p",null,i(p.title),1),e("p",Jt,"狀態："+i(p.isPrivate?"公開":"隱藏"),1),e("p",Wt,"人數："+i(p.totalVoters),1),e("p",Yt,"開始："+i(o.turnDate(p.startDate)),1),e("p",Zt,"結束："+i(o.turnDate(p.endDate)),1)]),e("td",Ht,i(p.isPrivate?"公開":"隱藏"),1),e("td",Xt,i(p.totalVoters),1),e("td",Lt,i(o.turnDate(p.startDate)),1),e("td",Kt,i(o.turnDate(p.endDate)),1),e("td",Qt,[e("button",{type:"button",class:"hover:text-primary",onClick:t[2]||(t[2]=(...b)=>o.$refs.ShareModal.openModal&&o.$refs.ShareModal.openModal(...b))},to)]),e("td",oo,[e("button",{type:"button",class:"hover:text-primary lg:hidden mb-3.5 lg:mb-0",onClick:t[3]||(t[3]=(...b)=>o.$refs.ShareModal.openModal&&o.$refs.ShareModal.openModal(...b))},ao),e("button",{type:"button",class:"hover:text-primary mb-3.5 lg:mb-0",onClick:t[4]||(t[4]=(...b)=>o.$refs.DelModal.openModal&&o.$refs.DelModal.openModal(...b))},ro),e("button",{type:"button",class:"hover:text-primary mb-3.5 lg:mb-0",onClick:t[5]||(t[5]=(...b)=>o.$refs.EditPullModal.openModal&&o.$refs.EditPullModal.openModal(...b))},io)])]))),128))])])]),h(C)]),h(U,{ref:"AddPullModal",addPollData:s.addPollData,optionsData:s.addPollData.optionsData,selectedTagsProps:s.addPollData.tags,allTags:s.allTags,endDateProps:s.endDate,onUpdatePoll:r.updateNewPoll},null,8,["addPollData","optionsData","selectedTagsProps","allTags","endDateProps","onUpdatePoll"]),h(S,{ref:"EditPullModal"},null,512),h(I,{ref:"DelModal",delContent:s.delContent},null,8,["delContent"]),h(E,{ref:"ShareModal"},null,512),h(j)],64)}const go=v(jt,[["render",co],["__scopeId","data-v-77e7bab4"]]);export{go as default};
